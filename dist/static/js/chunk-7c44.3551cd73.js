(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7c44"],{"/lrq":function(t,e,o){"use strict";o.r(e);var i=o("t3Un"),l=function(t,e,o){return Object(i.a)({url:"/product/stock/queryPageStock/"+t+"/"+e,method:"post",data:o})},c=function(){return Object(i.a)({url:"/product/stock/flushStock",method:"get"})},n=function(t){return Object(i.a)({url:"/product/stock/getStockById/"+t,method:"get"})},a=function(t){return Object(i.a)({url:"/product/stock/updateStock",method:"post",data:t})},s=function(t){return Object(i.a)({url:"/product/stock/getStockByProductId/"+t,method:"get"})},r={inject:["reload"],data:function(){return{saveVideoBtnDisabled:!1,dialogVideoFormVisible:!1,page:0,limit:10,total:0,queryStock:{productTitle:""},stockList:[],productlist:[],stockInfo:{id:""}}},created:function(){this.init()},methods:{flushStock:function(){var t=this;c().then(function(e){t.init(),t.$router.push({path:"/product/stockList/"}),t.reload()})},resetData:function(){this.queryStock.productTitle="",this.ListStock()},init:function(){if(this.$route.params&&this.$route.params.id){var t=this.$route.params.id;this.getStockByProductId(t)}else this.ListStock()},getStockByProductId:function(t){var e=this;s(t).then(function(t){e.stockList=t.data.stocks,e.total=1})},editStock:function(t){this.dialogVideoFormVisible=!0,this.getStockById(t)},getStockById:function(t){var e=this;n(t).then(function(t){e.stockInfo=t.data.stock})},updateStock:function(t){var e=this;a(this.stockInfo).then(function(t){e.dialogVideoFormVisible=!1,e.ListStock()})},UpdateData:function(){this.updateStock(),this.reload()},cancel:function(){this.dialogVideoFormVisible=!1,this.ListStock()},ListStock:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.page=e,console.log(this.page,this.limit,this.queryStock),l(this.page,this.limit,this.queryStock).then(function(e){t.stockList=e.data.result.stockList,t.total=e.data.result.total,console.log("stockList:",t.stockList)})}}},u=(o("UxcH"),o("KHd+")),d=Object(u.a)(r,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"app-container"},[o("h1",[t._v("库存页面："+t._s(t.total))]),t._v(" "),o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:17}},[o("h1",[t._v("商品列表")]),t._v(" "),o("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[o("el-form-item",{attrs:{label:"商品名称",width:"200"}},[o("el-input",{model:{value:t.queryStock.productTitle,callback:function(e){t.$set(t.queryStock,"productTitle",e)},expression:"queryStock.productTitle"}})],1),t._v(" "),o("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(e){t.ListStock()}}},[t._v("查询")]),t._v(" "),o("el-button",{attrs:{type:"default"},on:{click:t.resetData}},[t._v("清空")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:t.flushStock}},[t._v("刷新库存")])],1)],1)],1),t._v(" "),o("el-dialog",{attrs:{visible:t.dialogVideoFormVisible,title:"添加/修改库存"},on:{"update:visible":function(e){t.dialogVideoFormVisible=e}}},[o("el-form",{attrs:{"label-width":"120px"}},[o("el-form-item",{attrs:{label:"可用库存数量"}},[o("el-input",{staticStyle:{width:"240px"},attrs:{disabled:!0,min:1},model:{value:t.stockInfo.productTitle,callback:function(e){t.$set(t.stockInfo,"productTitle",e)},expression:"stockInfo.productTitle"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"可用库存数量"}},[o("el-input-number",{staticStyle:{width:"240px"},attrs:{min:0},model:{value:t.stockInfo.stock,callback:function(e){t.$set(t.stockInfo,"stock",e)},expression:"stockInfo.stock"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"锁定库存数量"}},[o("el-input-number",{staticStyle:{width:"240px"},attrs:{min:0},model:{value:t.stockInfo.lockStock,callback:function(e){t.$set(t.stockInfo,"lockStock",e)},expression:"stockInfo.lockStock"}})],1)],1),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:t.cancel}},[t._v("取 消")]),t._v(" "),o("el-button",{attrs:{disabled:t.saveVideoBtnDisabled,type:"primary"},on:{click:t.UpdateData}},[t._v("确 定")])],1)],1),t._v(" "),o("el-table",{attrs:{data:t.stockList,"element-loading-text":"拼命加载中",border:"",fit:"","highlight-current-row":""}},[o("el-table-column",{attrs:{label:"序号",width:"70",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\r\n                "+t._s(e.$index+1)+"\r\n            ")]}}])}),t._v(" "),o("el-table-column",{attrs:{prop:"productTitle",label:"产品名称",align:"center"}}),t._v(" "),o("el-table-column",{attrs:{prop:"stock",label:"可用库存",align:"center"}}),t._v(" "),o("el-table-column",{attrs:{prop:"lockStock",label:"锁定库存",align:"center"}}),t._v(" "),o("el-table-column",{attrs:{prop:"stockTotal",label:"总库存",align:"center"}}),t._v(" "),o("el-table-column",{attrs:{prop:"gmtCreate",label:"添加时间",align:"center"}}),t._v(" "),o("el-table-column",{attrs:{prop:"gmtModified",label:"修改时间",align:"center"}}),t._v(" "),o("el-table-column",{attrs:{label:"操作",width:"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(o){t.editStock(e.row.id)}}},[t._v("修改库存")])]}}])})],1),t._v(" "),o("el-pagination",{staticStyle:{padding:"30px 0","text-align":"center"},attrs:{"current-page":t.page,"page-size":t.limit,total:t.total,layout:"total, prev, pager, next, jumper"},on:{"current-change":t.ListStock}})],1)},[],!1,null,null,null);d.options.__file="stockList.vue";e.default=d.exports},IJEa:function(t,e,o){},UxcH:function(t,e,o){"use strict";var i=o("IJEa");o.n(i).a}}]);