(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-4aaa"],{"8kKy":function(e,t,n){},"T+5L":function(e,t,n){"use strict";var a=n("8kKy");n.n(a).a},n5P6:function(e,t,n){"use strict";n.r(t);var a=n("t3Un"),i=function(){return Object(a.a)({url:"/others/banner/listBanner",method:"get"})},o=function(e){return Object(a.a)({url:"/others/banner/addBanner",method:"post",data:e})},r=function(e){return Object(a.a)({url:"/others/banner/deleteBanner/"+e,method:"delete"})},s=function(e){return Object(a.a)({url:"/others/banner/getBannerById/"+e,method:"get"})},l=function(e){return Object(a.a)({url:"/others/banner/updateBanner",method:"post",data:e})},c={inject:["reload"],data:function(){return{saveBtnDisabled:!1,BASE_API:"https://easy-mock.com/mock/5950a2419adc231f356a6636/vue-admin",saveVideoBtnDisabled:!1,dialogVideoFormVisible:!1,bannerList:[],bannerInfo:{imageAddress:"../static/cover.jpg"}}},created:function(){this.listBanner()},methods:{updateBanner:function(){var e=this;l(this.bannerInfo).then(function(t){e.$message({type:"success",message:"更新成功"})})},helpSave:function(){this.dialogVideoFormVisible=!1,this.reload(),this.listBanner(),this.saveVideoBtnDisabled=!1},saveOrUpdate:function(){this.bannerInfo.id?(this.updateBanner(),this.helpSave()):(this.addBanner(),this.helpSave())},cancel:function(){this.dialogVideoFormVisible=!1,this.reload()},addBanner:function(){var e=this;o(this.bannerInfo).then(function(t){e.$message({type:"success",message:"添加成功"})})},getBannerById:function(e){var t=this;s(e).then(function(e){t.bannerInfo=e.data.banner,t.dialogVideoFormVisible=!0,console.log("bannerInfo:",t.bannerInfo)})},removeDataById:function(e){var t=this;this.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){r(e).then(function(e){t.listBanner(),t.$message({type:"success",message:"删除成功!"})})}).catch(function(e){"cancel"===e&&t.$message({type:"info",message:"已取消删除"})})},handleAvatarSuccess:function(e,t){console.log(e),console.log(URL.createObjectURL(t.raw)),this.bannerInfo.imageAddress=e.data.url,this.bannerInfo.imageFilename=e.data.filename},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,n=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),n||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&n},listBanner:function(){var e=this;i().then(function(t){e.bannerList=t.data.bannerList,console.log("bannerList：",e.bannerList)})}}},d=(n("T+5L"),n("KHd+")),u=Object(d.a)(c,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("h1",[e._v("幻灯片列表")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVideoFormVisible=!0,e.bannerInfoID=e.bannerInfo.id}}},[e._v("添加专辑")]),e._v(" "),n("el-dialog",{attrs:{visible:e.dialogVideoFormVisible,title:"添加/修改专辑"},on:{"update:visible":function(t){e.dialogVideoFormVisible=t}}},[n("el-form",{attrs:{"label-width":"120px"}},[n("el-form-item",{attrs:{label:"分类名称"}},[n("el-input",{staticStyle:{width:"300px"},model:{value:e.bannerInfo.title,callback:function(t){e.$set(e.bannerInfo,"title",t)},expression:"bannerInfo.title"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"封面上传"}},[n("el-upload",{staticClass:"avatar-uploader",attrs:{"show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload,action:e.BASE_API+"/others/Aliyun/oss"}},[n("img",{staticStyle:{width:"500px"},attrs:{src:e.bannerInfo.imageAddress}})])],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.cancel}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{disabled:e.saveVideoBtnDisabled,type:"primary"},on:{click:e.saveOrUpdate}},[e._v("确 定")])],1)],1),e._v(" "),n("el-table",{attrs:{data:e.bannerList,"element-loading-text":"拼命加载中",border:"",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{label:"序号",width:"70",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.$index+1)+"\n      ")]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"title",label:"名称",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"imageAddress",label:"图片",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[n("el-image",{attrs:{src:e.row.imageAddress,fit:"contain"}})]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"gmtCreate",label:"添加时间",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"gmtModified",label:"修改时间",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(n){e.getBannerById(t.row.id)}}},[e._v("修改")]),e._v(" "),n("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(n){e.removeDataById(t.row.id)}}},[e._v("删除")])]}}])})],1)],1)},[],!1,null,null,null);u.options.__file="bannerList.vue";t.default=u.exports}}]);