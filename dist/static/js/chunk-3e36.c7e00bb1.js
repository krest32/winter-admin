(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-3e36"],{"2XN9":function(t,e,o){"use strict";o.r(e);var r=o("xMja"),a={inject:["reload"],data:function(){return{AttrList:[],showAttr:!1,queryPuoductVo:{},page:0,limit:10,total:0,productList:[],productInfo:{attrIdList:[]},selectedCateList:[],catelogList:[],optionProps:{value:"id",label:"title",children:"childrenCatelogs"},defaultProps:{children:"attrList",label:"title"},productAttrGroupInfo:[],saveProductAttrVo:{},saveVideoBtnDisabled:!1,dialogVisible:!1,CheckbrandList:[],checkbrand:{},checkedList:[],brandList:[],brandInfo:{},title:""}},created:function(){this.ListAllBrand(),this.GetAllCateLog(),this.ListAllProduct()},methods:{statusChanged:function(t){var e=this;r.a.changeProductStatus(t).then(function(o){e.ListAllProduct(),e.GetEsProductInfo(t)})},GetEsProductInfo:function(t){var e=this;r.a.GetEsProductInfo(t).then(function(t){e.esProductInfo=t.data.esProduct,console.log("esProductInfo:",e.esProductInfo),e.esProductInfo.status?e.saveProductToEs():e.deleteEsProduct()})},saveProductToEs:function(){var t=this;r.a.saveProductToEs(this.esProductInfo).then(function(e){t.$message({type:"success",message:"商品上架成功!"})})},deleteEsProduct:function(){var t=this;r.a.deleteEsProduct(this.esProductInfo.id).then(function(e){t.$message({type:"success",message:"商品下架成功!"})})},toStockPage:function(){this.$router.push({path:"/product/editStock/"+this.productInfo.id})},removeRelation:function(t){var e=this;this.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){return r.a.deleteProductAttr(t)}).then(function(){e.afterEditAttrInfo(),e.$message({type:"success",message:"删除成功!"})})},removeDataById:function(t){var e=this;this.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){return r.a.deleteProductById(t)}).then(function(){e.ListAllProduct(),e.reload(),e.$message({type:"success",message:"删除成功!"})})},modifiedDataById:function(t){this.$router.push({path:"/product/editproduct/"+t})},addNewAttr:function(){this.$router.push({path:"/product/catelogAttr"})},editAttrForProduct:function(){var t=this;this.saveProductAttrVo.catelogAttrList=this.$refs.tree.getCheckedNodes(),console.log("saveProductAttrVo",this.saveProductAttrVo),r.a.addAttrForProduct(this.saveProductAttrVo).then(function(e){t.$message({type:"success",message:"保存成功!"}),t.afterEditAttrInfo()})},SaveOrupdateAttr:function(){this.editAttrForProduct(),this.afterEditAttrInfo()},afterEditAttrInfo:function(){this.dialogVisible=!1,this.getProductById(this.productInfo.id)},showDialog:function(){var t=this;this.dialogVisible=!0,r.a.GetAttrGroupById(this.productInfo.oneSortId).then(function(e){t.productAttrGroupInfo=e.data.attrGopurList})},GetAllCateLog:function(){var t=this;r.a.GetAllCateLog().then(function(e){t.catelogList=t.getTreeData(e.data.catelogList)})},getTreeData:function(t){for(var e=0;e<t.length;e++)t[e].childrenCatelogs.length<1?t[e].childrenCatelogs=void 0:this.getTreeData(t[e].childrenCatelogs);return t},ListAllProduct:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.page=e,r.a.ListAllProduct(this.page,this.limit,this.queryPuoductVo).then(function(e){t.total=e.data.productVo.total,t.productList=e.data.productVo.productList})},handleCateLogCheck:function(t){console.log("数据是:",t),console.log("=====",this.queryPuoductVo.sortId==t[2]),this.queryPuoductVo.sortId=t[2],console.log(this.queryPuoductVo)},dialogturue:function(){this.dialogVideoVisible=!0,this.ListAllBrand()},ListAllBrand:function(){var t=this;r.a.ListAllBrand().then(function(e){t.brandList=e.data.list})},resetData:function(){this.queryPuoductVo={},this.selectedCateList=[],this.ListAllProduct()},showAttrList:function(t){this.productInfo.id=t,this.saveProductAttrVo.productId=t,this.showAttr=!0,this.getProductById(t)},getProductById:function(t){var e=this;r.a.getProductById(t).then(function(t){e.productInfo=t.data.product,e.AttrList=t.data.product.attrList})},addproduct:function(){this.$router.push({path:"/product/addproduct"})},cancelAddAttr:function(){}}},n=(o("c/8g"),o("KHd+")),u=Object(n.a)(a,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"app-container"},[o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:17}},[o("h1",[t._v("商品列表：共计"+t._s(t.total)+"款")]),t._v(" "),o("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[o("el-form-item",{attrs:{label:"商品名称",width:"200"}},[o("el-input",{model:{value:t.queryPuoductVo.title,callback:function(e){t.$set(t.queryPuoductVo,"title",e)},expression:"queryPuoductVo.title"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"品牌"}},[o("el-select",{attrs:{filterable:"",placeholder:"请选择",width:"200"},model:{value:t.queryPuoductVo.bandId,callback:function(e){t.$set(t.queryPuoductVo,"bandId",e)},expression:"queryPuoductVo.bandId"}},t._l(t.brandList,function(t){return o("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})}))],1),t._v(" "),o("el-form-item",{attrs:{label:"分类"}},[o("el-cascader",{staticStyle:{width:"280px"},attrs:{options:t.catelogList,props:t.optionProps,filterable:""},on:{change:t.handleCateLogCheck},model:{value:t.selectedCateList,callback:function(e){t.selectedCateList=e},expression:"selectedCateList"}})],1),t._v(" "),o("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(e){t.ListAllProduct()}}},[t._v("查询")]),t._v(" "),o("el-button",{attrs:{type:"default"},on:{click:function(e){t.resetData()}}},[t._v("清空")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:t.addproduct}},[t._v("添加商品")])],1),t._v(" "),o("el-table",{attrs:{data:t.productList,"element-loading-text":"拼命加载中",border:"",fit:"","highlight-current-row":""}},[o("el-table-column",{attrs:{label:"序号",width:"70",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\r\n                        "+t._s((t.page-1)*t.limit+e.$index+1)+"\r\n                    ")]}}])}),t._v(" "),o("el-table-column",{attrs:{prop:"title",label:"名称",align:"center"}}),t._v(" "),o("el-table-column",{attrs:{prop:"brandTitle",label:"品牌",align:"center"}}),t._v(" "),o("el-table-column",{attrs:{prop:"oneSortTitle",label:"一级分类",align:"center"}}),t._v(" "),o("el-table-column",{attrs:{prop:"twoSortTitle",label:"二级分类",align:"center"}}),t._v(" "),o("el-table-column",{attrs:{prop:"threeSortTitle",label:"三级分类",align:"center"}}),t._v(" "),o("el-table-column",{attrs:{prop:"price",label:"价格",align:"center",sortable:""}}),t._v(" "),o("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"status",label:"是否上架",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-switch",{on:{change:function(o){t.statusChanged(e.row.id)}},model:{value:e.row.status,callback:function(o){t.$set(e.row,"status",o)},expression:"scope.row.status"}})]}}])}),t._v(" "),o("el-table-column",{attrs:{prop:"封面",label:"头像",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[o("el-image",{staticStyle:{width:"80px",height:"60px"},attrs:{src:t.row.picture,fit:"contain"}})]}}])}),t._v(" "),o("el-table-column",{attrs:{prop:"gmtCreate",label:"修改时间",align:"center",sortable:""}}),t._v(" "),o("el-table-column",{attrs:{label:"属性",align:"center",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(o){t.showAttrList(e.row.id)}}},[t._v("属性列表")])]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"操作",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(o){t.modifiedDataById(e.row.id)}}},[t._v("修改")]),t._v(" "),o("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(o){t.removeDataById(e.row.id)}}},[t._v("删除")])]}}])})],1),t._v(" "),o("el-pagination",{staticStyle:{padding:"30px 0","text-align":"center"},attrs:{"current-page":t.page,"page-size":t.limit,total:t.total,layout:"total, prev, pager, next, jumper"},on:{"current-change":t.ListAllProduct}})],1),t._v(" "),t.showAttr?o("el-col",{attrs:{span:7}},[o("h1",[t._v("属性列表")]),t._v(" "),o("el-row",[o("el-button",{attrs:{type:"primary"},on:{click:t.showDialog}},[t._v("\r\n                    为"+t._s(t.productInfo.title)+"添加属性")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:t.toStockPage}},[t._v("\r\n                    库存管理")])],1),t._v(" "),o("el-dialog",{attrs:{visible:t.dialogVisible,title:"添加/修改属性"},on:{"update:visible":function(e){t.dialogVisible=e}}},[o("el-tree",{ref:"tree",attrs:{data:t.productAttrGroupInfo,props:t.defaultProps,"default-checked-keys":t.productInfo.attrIdList,"show-checkbox":"","node-key":"id","default-expand-all":"","expand-on-click-node":!1}}),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:t.addNewAttr}},[t._v("添加属性信息")]),t._v(" "),o("el-button",{on:{click:t.cancelAddAttr}},[t._v("取 消")]),t._v(" "),o("el-button",{attrs:{disabled:t.saveVideoBtnDisabled,type:"primary"},on:{click:t.SaveOrupdateAttr}},[t._v("确 定")])],1)],1),t._v(" "),o("el-table",{attrs:{data:t.AttrList,"element-loading-text":"拼命加载中",border:"",fit:"","highlight-current-row":""}},[o("el-table-column",{attrs:{label:"序号",width:"70",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\r\n                        "+t._s(e.$index+1)+"\r\n                    ")]}}])}),t._v(" "),o("el-table-column",{attrs:{prop:"attrGroupTitle",label:"名称",align:"center"}}),t._v(" "),o("el-table-column",{attrs:{prop:"attrTitle",label:"属性值",align:"center"}}),t._v(" "),o("el-table-column",{attrs:{label:"操作",width:"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-edit"},on:{click:function(o){t.removeRelation(e.row.id)}}},[t._v("删除关联")])]}}])})],1)],1):t._e()],1)],1)},[],!1,null,null,null);u.options.__file="productList.vue";e.default=u.exports},"L2h+":function(t,e,o){},"c/8g":function(t,e,o){"use strict";var r=o("L2h+");o.n(r).a},xMja:function(t,e,o){"use strict";var r=o("t3Un");e.a={GetAllCateLog:function(){return Object(r.a)({url:"/product/catelog/GetALlCateLog",method:"get"})},deleteCateLog:function(t){return Object(r.a)({url:"/product/catelog/deleteCateLog/"+t,method:"delete"})},AddNewCateLog:function(t){return Object(r.a)({url:"/product/catelog/AddNewCateLog",method:"post",data:t})},UpdateNewCateLog:function(t){return Object(r.a)({url:"/product/catelog/UpdateNewCateLog",method:"post",data:t})},GetCateLogByID:function(t){return Object(r.a)({url:"/product/catelog/GetCateLogByID/"+t,method:"get"})},AddNewMainCateLog:function(t){return Object(r.a)({url:"/product/catelog/AddNewMainCateLog",method:"post",data:t})},ListAllBrand:function(){return Object(r.a)({url:"/product/brand/ListAllBrand",method:"get"})},DeleteBrandById:function(t){return Object(r.a)({url:"/product/brand/DeleteBrandById/"+t,method:"delete"})},AddNewBrand:function(t){return Object(r.a)({url:"/product/brand/AddNewBrand",method:"post",data:t})},GetBrandById:function(t){return Object(r.a)({url:"/product/brand/getBrandById/"+t,method:"get"})},updateBrand:function(t){return Object(r.a)({url:"/product/brand/updateBrand",method:"post",data:t})},pageQueryBrand:function(t,e,o){return Object(r.a)({url:"/product/brand/pageQueryBrand/"+t+"/"+e,method:"post",data:o})},getBrandBySortId:function(t){return Object(r.a)({url:"/product/brand-sort/getBrandBySortId/"+t,method:"get"})},addNewRelation:function(t){return Object(r.a)({url:"/product/brand-sort/addNewRelation",method:"post",data:t})},cancelRelation:function(t,e){return Object(r.a)({url:"/product/brand-sort/cancelRelation/"+t+"/"+e,method:"get"})},GetAttrGroupById:function(t){return Object(r.a)({url:"/product/catelog-attrgroup/GetAttrGroupById/"+t,method:"get"})},addNewAttrGroup:function(t){return Object(r.a)({url:"/product/catelog-attrgroup/addNewAttrGroup",method:"post",data:t})},deleteAttrGroup:function(t){return Object(r.a)({url:"/product/catelog-attrgroup/deleteAttrGroup/"+t,method:"delete"})},getAttrGroupInfo:function(t){return Object(r.a)({url:"/product/catelog-attrgroup/getAttrGroupInfo/"+t,method:"get"})},updateNewAttrGroup:function(t){return Object(r.a)({url:"/product/catelog-attrgroup/updateNewAttrGroup",method:"post",data:t})},getAttrByGroupId:function(t){return Object(r.a)({url:"/product/catelog-attr/getAttrByGroupId/"+t,method:"get"})},addNewAttr:function(t){return Object(r.a)({url:"/product/catelog-attr/addNewAttr",method:"post",data:t})},deleteAttrById:function(t){return Object(r.a)({url:"/product/catelog-attr/deleteAttrById/"+t,method:"delete"})},getAttrById:function(t){return Object(r.a)({url:"/product/catelog-attr/getAttrById/"+t,method:"get"})},updateAttr:function(t){return Object(r.a)({url:"/product/catelog-attr/updateAttr",method:"post",data:t})},ListAllProduct:function(t,e,o){return Object(r.a)({url:"/product/product/pageQueryAllProduct/"+t+"/"+e,method:"post",data:o})},addNewProduct:function(t){return Object(r.a)({url:"/product/product/addNewProduct",method:"post",data:t})},getProductById:function(t){return Object(r.a)({url:"/product/product/getProductById/"+t,method:"get"})},updateProduct:function(t){return Object(r.a)({url:"/product/product/updateProduct",method:"post",data:t})},deleteProductById:function(t){return Object(r.a)({url:"/product/product/deleteProductById/"+t,method:"delete"})},addAttrForProduct:function(t){return Object(r.a)({url:"/product/attr/addAttrForProduct",method:"post",data:t})},deleteProductAttr:function(t){return Object(r.a)({url:"/product/attr/deleteProductAttr/"+t,method:"delete"})},changeProductStatus:function(t){return Object(r.a)({url:"/product/product/changeProductStatus/"+t,method:"get"})},GetEsProductInfo:function(t){return Object(r.a)({url:"/product/product/GetEsProductInfo/"+t,method:"get"})},saveProductToEs:function(t){return Object(r.a)({url:"/others/es/saveEsProduct",method:"post",data:t})},deleteEsProduct:function(t){return Object(r.a)({url:"/others/es/deleteEsProduct/"+t,method:"delete"})}}}}]);