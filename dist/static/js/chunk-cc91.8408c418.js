(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-cc91"],{Az5C:function(t,e,r){"use strict";var o=r("V56U");r.n(o).a},"MxS+":function(t,e,r){"use strict";r.r(e);var o=r("xMja"),a={data:function(){return{isIndeterminate:!0,num:0,checkAll:!0,BASE_API:"https://easy-mock.com/mock/5950a2419adc231f356a6636/vue-admin",fileUploadBtnText:"上传到服务器",importBtnDisabled:!1,loading:!1,saveBtnDisabled:!1,saveVideoBtnDisabled:!1,count:0,optionProps:{value:"id",label:"title",children:"childrenCatelogs"},productInfo:{status:!1,title:"",brandId:"",oneSortId:"",attrIds:[],sortIdList:[],picture:"/static/cover.jpg",pictureName:""},attrGroupList:[],attrgroup:"",brandList:[],catelogList:[0],selectedCateList:[0],listAttrGroup:[0],attrsList:[0],attrGroupAttrList:[0]}},created:function(){this.ListAllBrand(),this.GetAllCateLog(),this.getProductInfo()},methods:{getProductInfo:function(){var t=this;if(this.$route.params&&this.$route.params.id){var e=this.$route.params.id;o.a.getProductById(e).then(function(e){t.productInfo=e.data.product,console.log("productInfo:",t.productInfo)})}},beforeAvatarUpload:function(t){var e="image/jpeg"===t.type,r=t.size/1024/1024<2;return e||this.$message.error("上传头像图片只能是 JPG 格式!"),r||this.$message.error("上传头像图片大小不能超过 2MB!"),e&&r},handleAvatarSuccess:function(t,e){console.log(t),console.log(URL.createObjectURL(e.raw)),this.productInfo.picture=t.data.url,this.productInfo.pictureName=t.data.filename},handleCateLogCheck:function(t){this.productInfo.oneSortId=t[2],this.productInfo.sortIdList=t},GetAllCateLog:function(){var t=this;o.a.GetAllCateLog().then(function(e){t.catelogList=t.getTreeData(e.data.catelogList)})},getTreeData:function(t){for(var e=0;e<t.length;e++)t[e].childrenCatelogs.length<1?t[e].childrenCatelogs=void 0:this.getTreeData(t[e].childrenCatelogs);return t},ListAllBrand:function(){var t=this;o.a.ListAllBrand().then(function(e){t.brandList=e.data.list,console.log(t.brandList)})},onSubmit:function(){this.productInfo.id?this.updateProduct():this.addNewProduct()},updateProduct:function(){var t=this;console.log("保存的数据是：",this.productInfo),o.a.updateProduct(this.productInfo).then(function(e){return t.$message({type:"success",message:"更新成功!"})}).then(function(e){t.$router.push({path:"/product/productList"})})},addNewProduct:function(){var t=this;console.log("保存的数据是：",this.productInfo),o.a.addNewProduct(this.productInfo).then(function(e){return t.$message({type:"success",message:"保存成功!"})}).then(function(e){t.$router.push({path:"/product/productList"})})},cancel:function(){this.$router.push({path:"/product/productList"})}}},d=(r("Az5C"),r("KHd+")),u=Object(d.a)(a,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"app-container"},[r("h1",[t._v("商品信息页面")]),t._v(" "),r("el-form",{ref:"form",attrs:{model:t.productInfo,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"商品名称"}},[r("el-input",{staticStyle:{width:"300px"},model:{value:t.productInfo.title,callback:function(e){t.$set(t.productInfo,"title",e)},expression:"productInfo.title"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"品牌选择"}},[r("el-select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择"},model:{value:t.productInfo.brandId,callback:function(e){t.$set(t.productInfo,"brandId",e)},expression:"productInfo.brandId"}},t._l(t.brandList,function(t){return r("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})}))],1),t._v(" "),r("el-form-item",{attrs:{label:"产品分类"}},[r("el-cascader",{staticStyle:{width:"300px"},attrs:{options:t.catelogList,props:t.optionProps},on:{change:t.handleCateLogCheck},model:{value:t.productInfo.sortIdList,callback:function(e){t.$set(t.productInfo,"sortIdList",e)},expression:"productInfo.sortIdList"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"图片上传"}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{"show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload,action:t.BASE_API+"/others/Aliyun/oss"}},[r("img",{staticStyle:{width:"500px"},attrs:{src:t.productInfo.picture}})])],1),t._v(" "),r("el-form-item",{attrs:{label:"价格"}},[r("el-input-number",{staticStyle:{width:"300px"},model:{value:t.productInfo.price,callback:function(e){t.$set(t.productInfo,"price",e)},expression:"productInfo.price"}})],1),t._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("立即添加")]),t._v(" "),r("el-button",{on:{click:t.cancel}},[t._v("取消")])],1)],1)],1)},[],!1,null,null,null);u.options.__file="editproduct.vue";e.default=u.exports},V56U:function(t,e,r){},xMja:function(t,e,r){"use strict";var o=r("t3Un");e.a={GetAllCateLog:function(){return Object(o.a)({url:"/product/catelog/GetALlCateLog",method:"get"})},deleteCateLog:function(t){return Object(o.a)({url:"/product/catelog/deleteCateLog/"+t,method:"delete"})},AddNewCateLog:function(t){return Object(o.a)({url:"/product/catelog/AddNewCateLog",method:"post",data:t})},UpdateNewCateLog:function(t){return Object(o.a)({url:"/product/catelog/UpdateNewCateLog",method:"post",data:t})},GetCateLogByID:function(t){return Object(o.a)({url:"/product/catelog/GetCateLogByID/"+t,method:"get"})},AddNewMainCateLog:function(t){return Object(o.a)({url:"/product/catelog/AddNewMainCateLog",method:"post",data:t})},ListAllBrand:function(){return Object(o.a)({url:"/product/brand/ListAllBrand",method:"get"})},DeleteBrandById:function(t){return Object(o.a)({url:"/product/brand/DeleteBrandById/"+t,method:"delete"})},AddNewBrand:function(t){return Object(o.a)({url:"/product/brand/AddNewBrand",method:"post",data:t})},GetBrandById:function(t){return Object(o.a)({url:"/product/brand/getBrandById/"+t,method:"get"})},updateBrand:function(t){return Object(o.a)({url:"/product/brand/updateBrand",method:"post",data:t})},pageQueryBrand:function(t,e,r){return Object(o.a)({url:"/product/brand/pageQueryBrand/"+t+"/"+e,method:"post",data:r})},getBrandBySortId:function(t){return Object(o.a)({url:"/product/brand-sort/getBrandBySortId/"+t,method:"get"})},addNewRelation:function(t){return Object(o.a)({url:"/product/brand-sort/addNewRelation",method:"post",data:t})},cancelRelation:function(t,e){return Object(o.a)({url:"/product/brand-sort/cancelRelation/"+t+"/"+e,method:"get"})},GetAttrGroupById:function(t){return Object(o.a)({url:"/product/catelog-attrgroup/GetAttrGroupById/"+t,method:"get"})},addNewAttrGroup:function(t){return Object(o.a)({url:"/product/catelog-attrgroup/addNewAttrGroup",method:"post",data:t})},deleteAttrGroup:function(t){return Object(o.a)({url:"/product/catelog-attrgroup/deleteAttrGroup/"+t,method:"delete"})},getAttrGroupInfo:function(t){return Object(o.a)({url:"/product/catelog-attrgroup/getAttrGroupInfo/"+t,method:"get"})},updateNewAttrGroup:function(t){return Object(o.a)({url:"/product/catelog-attrgroup/updateNewAttrGroup",method:"post",data:t})},getAttrByGroupId:function(t){return Object(o.a)({url:"/product/catelog-attr/getAttrByGroupId/"+t,method:"get"})},addNewAttr:function(t){return Object(o.a)({url:"/product/catelog-attr/addNewAttr",method:"post",data:t})},deleteAttrById:function(t){return Object(o.a)({url:"/product/catelog-attr/deleteAttrById/"+t,method:"delete"})},getAttrById:function(t){return Object(o.a)({url:"/product/catelog-attr/getAttrById/"+t,method:"get"})},updateAttr:function(t){return Object(o.a)({url:"/product/catelog-attr/updateAttr",method:"post",data:t})},ListAllProduct:function(t,e,r){return Object(o.a)({url:"/product/product/pageQueryAllProduct/"+t+"/"+e,method:"post",data:r})},addNewProduct:function(t){return Object(o.a)({url:"/product/product/addNewProduct",method:"post",data:t})},getProductById:function(t){return Object(o.a)({url:"/product/product/getProductById/"+t,method:"get"})},updateProduct:function(t){return Object(o.a)({url:"/product/product/updateProduct",method:"post",data:t})},deleteProductById:function(t){return Object(o.a)({url:"/product/product/deleteProductById/"+t,method:"delete"})},addAttrForProduct:function(t){return Object(o.a)({url:"/product/attr/addAttrForProduct",method:"post",data:t})},deleteProductAttr:function(t){return Object(o.a)({url:"/product/attr/deleteProductAttr/"+t,method:"delete"})},changeProductStatus:function(t){return Object(o.a)({url:"/product/product/changeProductStatus/"+t,method:"get"})},GetEsProductInfo:function(t){return Object(o.a)({url:"/product/product/GetEsProductInfo/"+t,method:"get"})},saveProductToEs:function(t){return Object(o.a)({url:"/others/es/saveEsProduct",method:"post",data:t})},deleteEsProduct:function(t){return Object(o.a)({url:"/others/es/deleteEsProduct/"+t,method:"delete"})}}}}]);